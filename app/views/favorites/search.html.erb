<%= render :partial => "favorites" %>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <%= form_tag(favorites_search_path, method: :get, class: 'form-inline') do %>
        <%= text_field_tag :title, @title, class: 'form-control', placeholder:'書籍タイトル', size: 30 %>
        <%= submit_tag '検索', class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
  
  <% @books.each do |book| %>
    <div class="row book"> 
      <div class="col-md-4 image">
        <img src="<%= book[:image_url] %>" class="img-responsive" alt="">
      </div>
      <div class="col-md-5">
        <div class="text">
          <div><h3><%= book[:title] %></h3></div>
          <div><%= book[:isbn] %></div>
        </div>
      </div>
      <div class="col-md-3">
        <% if @favorite_books.map(&:isbn).include?(book[:isbn]) %>
          <div class="text">
            <button class = "btn btn-primary" disabled >お気に入りに追加済み</ button>
          </div>
        <% else %>
        <div class="text">
          <%= form_tag(favorites_path, method: :post) do %>
            <%= hidden_field_tag :isbn, book[:isbn] %>
            <%= submit_tag 'お気に入り書籍に追加', class: "btn btn-primary" %>
          <% end %>
        </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

